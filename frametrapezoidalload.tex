\pgfkeys{
/frametrapezoidalload/.is family, /frametrapezoidalload,
default/.style={
startx = 0cm,
starty = 0cm,
endx = 5cm,
endy = 5cm,
number of arrows = 10,
print first arrow = 1,
print last arrow = 1,
height of arrows left= 0.5cm,
height of arrows mid = 1cm,
height of arrows right= 0.5cm,
mid ratio left = 0.4,
mid ratio right = 0.3,
load angle=0,
space = 0.1cm,
start ratio = 0.02,
end ratio = 0.02,
mid load text = $\SI{10}{\kilo\newton/\meter}$,
left load text = $\SI{20}{\kilo\newton/\meter}$,
right load text = $\SI{10}{\kilo\newton/\meter}$,
text aligning = sloped,
text color = black,
mid text shiftx=0pt,
mid text shifty=0pt,
left text shiftx=0pt,
left text shifty=0pt,
right text shiftx=0pt,
right text shifty=0pt,
arrow length=5pt,
arrow width=3pt,
arrow scale=1,
arrow line thickness=1pt
arrow color = black,
draw angle = 1,
angle arrow number = 10,
angle line thickness = 0.5pt,
angle length = 2cm,
angle space = 0.1cm,
angle location = 2cm,
angle text = $\alpha$,
angle text xshift = 0.0cm,
angle text yshift = 0.0cm,
draw ninety sign=2,
ninety sign dimension=0.2cm,
ninety sign factor=4,},
startx/.store in = \loadstartcoordx,
starty/.store in = \loadstartcoordy,
endx/.store in = \loadendcoordx,
endy/.store in = \loadendcoordy,
number of arrows/.store in = \loadarrownumber,
print first arrow/.store in = \printfirstarrow,
print last arrow/.store in = \printlastarrow,
height of arrows left/.store in = \loadarrowheightleft,
height of arrows mid/.store in = \loadarrowheightmid,
height of arrows right/.store in = \loadarrowheightright,
mid ratio left/.store in = \midratioleft,
mid ratio right/.store in = \midratioright,
load angle/.store in=\extraangle,
space/.store in = \loadarrowspace,
start ratio/.store in = \loadstartratio,
end ratio/.store in = \loadendratio,
mid load text/.store in = \midloadtext,
left load text/.store in = \leftloadtext,
right load text/.store in = \rightloadtext,
text aligning/.store in =\textalign,
text color/.store in = \textcolor,
mid text shiftx/.store in = \midtextshiftx,
mid text shifty/.store in = \midtextshifty,
left text shiftx/.store in = \lefttextshiftx,
left text shifty/.store in = \lefttextshifty,
right text shiftx/.store in = \righttextshiftx,
right text shifty/.store in = \righttextshifty,
arrow length/.store in = \arrlen,
arrow width/.store in = \arrwid,
arrow scale/.store in = \arrscale,
arrow line thickness/.store in = \arrlinethk,
arrow color/.store in = \arrcolor,
draw angle/.store in = \drawangle,
angle arrow number/.store in = \drawanglei,
angle line thickness/.store in =\anglinethk,
angle length/.store in = \anglen,
angle space/.store in = \angsp,
angle location/.store in = \angloc,
angle text/.store in = \angtext,
angle text xshift/.store in = \angtextshiftx,
angle text yshift/.store in = \angtextshifty,
draw ninety sign/.store in = \drawninetysign,
ninety sign dimension/.store in = \ninetydim,
ninety sign factor/.store in = \ninetyfac,}
%\loadstartcoordx: starting coordinate x
%\loadstartcoordy: starting coordinate y
%\loadendcoordx: end coordinate x
%\loadendcoordy: end coordinate y
%\loadarrownumber: number of arrows
%\loadarrowheightleft: height of arrows on the left hand side
%\loadarrowheightright: height of arrows on the right hand side
%\loadarrowspace: distance of arrows from the frame
%\loadstartratio: start(first) arrow start ratio
%\loadendratio: end (last) arrow start ratio
\newcommand{\frametrapezoidalload}[1][]{
\pgfkeys{/frametrapezoidalload, default, #1}
\tikzmath{
real \loadstartcoordx, \loadstartcoordy, \loadendcoordx, \loadendcoordy;
real \loadangle, \loadunx, \loaduny, \loaddxf, \loaddyf;
real \loaddxa, \loaddya, \loadaaa, \loadbbb;
real \loadxvalue, \loadyvalue;
real \loadwxvalue, \loadwyvalue;
real \loadarrowheightleft, \loadarrowheightright, \loadarrowheightmid;
real \midpointratio;
real \loadstartratio, \loadendratio, \lenf;
int \loadarrownumber, \loadarrownumbermo, \i, \j, \printfirstarrows, \leftendarrno;
real \loadarrowheight, \ldangleleft, \ldangleright;
real \dahleft, \dahright, \totalangleleft, \totallengthleft, \totallengthright;
real \arrlen, \arrwid, \arrscale, \arrlinethk;
real \midtextshiftx, \midtextshifty;
real \lefttextshiftx, \lefttextshiftx;
real \righttextshiftx, \righttextshiftx;
int \drawanglei, \absextraangle, \extraangle;
real \anglen, \angsp, \angloc, \ninetydim, \anglinethk;
real \angtextshiftx, \angtextshifty;
%Conversion all units to the unit pt
\loadstartcoordx = \loadstartcoordx;
\loadstartcoordy = \loadstartcoordy;
\loadendcoordx = \loadendcoordx;
\loadendcoordy = \loadendcoordy;
\loadarrowheightleft = \loadarrowheightleft;
\loadarrowheightmid = \loadarrowheightmid;
\loadarrowheightright = \loadarrowheightright;
\loadarrowspace = \loadarrowspace;
\arrlen=\arrlen;
\arrwid=\arrwid;
\arrlinethk=\arrlinethk;
\midtextshiftx=\midtextshiftx;
\midtextshifty=\midtextshifty;
\lefttextshiftx=\lefttextshiftx;
\lefttextshifty=\lefttextshifty;
\righttextshiftx=\righttextshiftx;
\righttextshifty=\righttextshifty;
\ninetydim=\ninetydim;
\anglen=\anglen;
\angsp=\angsp;
\angloc=\angloc;
\angtextshifty=\angtextshifty;
\angtextshiftx=\angtextshiftx;
\anglinethk=\anglinethk;
%End conversion, All values are now in pt units.
%% Force application line
\loaddxf = (\loadendcoordx-\loadstartcoordx); %dx for the whole frame
\loaddyf = (\loadendcoordy-\loadstartcoordy); %dy for the whole frame
\lenf = veclen(\loaddxf, \loaddyf);
\loadangle = atan2(\loaddyf,\loaddxf);
%% Start of arrows
\arrforceratio= 1-(\loadstartratio+\loadendratio);
\loaddxa = \loaddxf*(\arrforceratio); %dx for the start and end of arrow
\loaddya = \loaddyf*(\arrforceratio); %dy for the start and end of arrow
\lena = veclen(\loaddxa, \loaddya);
\loaddxaleft = \loaddxf*(\midratioleft); %dx for the start and end of arrow
\loaddyaleft = \loaddyf*(\midratioleft); %dy for the start and end of arrow
\lenaleft = \lenf*(\midratioleft);
\loaddxaright = \loaddxf*(\midratioright)); %dx for the start and end of arrow
\loaddyaright = \loaddyf*(\midratioright)); %dy for the start and end of arrow
\lenaright = \lenf*(\midratioright);
\lenamid = \lena-\lenaleft-\lenaright;
%%%
\dahleft = \loadarrowheightmid-\loadarrowheightleft;
\dahright = \loadarrowheightmid-\loadarrowheightright;
\ldangleleft = atan2(\dahleft,\lenaleft);
\ldangleright = atan2(\dahright,\lenaright);
\totalangleleft = \loadangle + \ldangleleft;
\totalangleright = \loadangle + \ldangleright;
%%%
\totallengthleft = veclen(\lenaleft, \dahleft); %%length of inclined surface
\totallengthright = veclen(\lenaright, \dahright); %%length of inclined surface
%%
%% Shifted load arrows at the left and right
\loadarrowlenleftnew=\loadarrowheightleft/cos(\extraangle);
\loadarrowleftshifta=\loadarrowheightleft*tan(\extraangle);
\loadarrowleftshiftb=\loadarrowheightmid*tan(\extraangle);
\lenaleftshift= \lenaleft+\loadarrowleftshiftb-\loadarrowleftshifta;
\totallengthleftnew = veclen(\lenaleftshift, \dahleft);
\newangleleft=atan2(\dahleft,\lenaleftshift);
\totalangleleftnew=\loadangle+\newangleleft;
%
\loadarrowlenrightnew=\loadarrowheightright/cos(\extraangle);
\loadarrowrightshifta=\loadarrowheightright*tan(\extraangle);
\loadarrowrightshiftb=\loadarrowheightmid*tan(\extraangle);
\lenarightshift= \lenaright-\loadarrowrightshiftb+\loadarrowrightshifta;
\totallengthrightnew = veclen(\lenarightshift, \dahright);
\newangleright=atan2(\dahright,\lenarightshift);
\totalanglerightnew=\loadangle-\newangleright;
%-\newangleright+\loadangle
%%%
\loadwxvalue = (\loaddxa)/(\loadarrownumber-1); %dx for the single arrow
\loadwyvalue = (\loaddya)/(\loadarrownumber-1); %dx for the single arrow
\loadxvalue{1} = \loadstartcoordx + \loaddxf*(\loadstartratio);
\loadyvalue{1} = \loadstartcoordy + \loaddyf*(\loadstartratio);
\loadxvalue{\loadarrownumber} = \loadxvalue{1} + \loaddxa;
\loadyvalue{\loadarrownumber} = \loadyvalue{1} + \loaddya;
%%
\loadarrownumbermo = \loadarrownumber-1;
%%
\arrlenratioleft = (\midratioleft) / (\arrforceratio);
\arrlenratioright = (\midratioright) / (\arrforceratio);
\leftstartarrno=2;
\leftendarrno = int((\loadarrownumber-1)*\arrlenratioleft)+1;
\nleftarrows=\leftendarrno-\leftstartarrno+1;
%\rightstartarrno = int(\leftendarrno + 1);
\rightstartarrno = \loadarrownumber-int((\loadarrownumber-1)*\arrlenratioright);
\rightendarrno=\loadarrownumbermo;
\nrightarrows=\rightendarrno-\rightstartarrno+1;
%%
%% First and Last Arrow Heights
\loadarrowheight{1} = (\loadarrowheightleft)/cos(\extraangle);
\loadarrowheight{\loadarrownumber} = (\loadarrowheightright)/cos(\extraangle);
%% Left Region
if \nleftarrows > 0 then {
\leftendarrratio=(\leftendarrno-1)*\loadwxvalue/\loaddxaleft;
\dahleftend=\leftendarrratio*\dahleft;
for \i in {\leftstartarrno,...,{\leftendarrno}}{
\loadxvalue{\i} = \loadxvalue{1} + (\i-1)*\loadwxvalue;
\loadyvalue{\i} = \loadyvalue{1} + (\i-1)*\loadwyvalue;
\loadarrowheight{\i} = (\loadarrowheightleft + (\dahleftend)/(\leftendarrno-1)*(\i-1))/cos(\extraangle);
};} else {};
%% Mid Region
for \i in {{\leftendarrno+1},...,{\rightstartarrno-1}}{
	\loadxvalue{\i} = \loadxvalue{1} + (\i-1)*\loadwxvalue;
	\loadyvalue{\i} = \loadyvalue{1} + (\i-1)*\loadwyvalue;
	\loadarrowheight{\i} = \loadarrowheightmid/cos(\extraangle);
};
%% Right Region
if \nrightarrows > 0 then {
\rightstartarrratio=(\loadarrownumber-\rightstartarrno)*\loadwxvalue/\loaddxaright;
\dahrightstart=\rightstartarrratio*\dahright;
for \i in {{\rightendarrno},...,{\rightstartarrno}}{
\loadxvalue{\i} = \loadxvalue{\loadarrownumber} - (\loadarrownumber - (\i))*\loadwxvalue;
\loadyvalue{\i} = \loadyvalue{\loadarrownumber} - (\loadarrownumber - (\i))*\loadwyvalue;
\loadarrowheight{\i} = (\loadarrowheightright + (\dahrightstart)/(\loadarrownumber-\rightstartarrno)*(\loadarrownumber - (\i)))/cos(\extraangle);
};} else {};
\loc = ifthenelse(\loadarrowheightleft>=0,"above","below");
% print {$\loaddxf$};
\arrspang=90+\loadangle;
\loadnewang=90+\loadangle-\extraangle;
\loadnewangright=-90+\loadangle-\extraangle;
%%
\ninetya=\ninetyfac*\ninetydim;
\ninetyb=(\ninetyfac-1)*\ninetydim;
\totanglen=(\loadarrowheight{\drawanglei} + \angsp + \anglen)/cos(\extraangle);
%%
\absextraangle=abs(\extraangle);
\cosextang=cos(\extraangle);
}

\tikzset{
forcearr/.style={
arrows={<[length=\arrlen, width=\arrwid, scale=\arrscale, flex=1, bend]-}}
};

\tikzset{
arrforce/.style={
arrows={->[length=\arrlen, width=\arrwid, scale=\arrscale, flex=1, bend]}}
};

\tikzset{
forcearrarr/.style={
arrows={<[length=\arrlen, width=\arrwid, scale=\arrscale, flex=1, bend]-
>[length=\arrlen, width=\arrwid, scale=\arrscale, flex=1, bend]}}
};

\tikzset{
	loadarrowangle/.style={
	arrows={->[flex=1, bend, width=3pt, length=4pt]}}
};



\begin{scope}[x=1pt, y=1pt]; % Drawing everything in pt units
	
% Inner Arrows
\foreach \i in {2,...,\loadarrownumbermo}{
\draw [forcearr, line width=\arrlinethk, \arrcolor]
(\loadxvalue{\i}, \loadyvalue{\i})
++(\arrspang:\loadarrowspace) --
++(\loadnewang:\loadarrowheight{\i});}

\ifthenelse{\printfirstarrow=0}
{
	\ifthenelse{\printlastarrow=0}{\def \thearrow {}}{\def \thearrow {arrforce}};
}
{
	\ifthenelse{\printlastarrow=0}{\def \thearrow {forcearr}}{\def \thearrow {forcearrarr}};
};

%% The top line of the arrows and left and line arrows
\draw [\thearrow, line width=\arrlinethk, \arrcolor]
(\loadxvalue{1},\loadyvalue{1}) 
++(\arrspang:\loadarrowspace)--
node[\loc, at end, xshift=\lefttextshiftx, yshift=\lefttextshifty, \textcolor]{\leftloadtext}
++(\loadnewang:\loadarrowlenleftnew) --
++(\totalangleleftnew:\totallengthleftnew)--
node[\loc, xshift=\midtextshiftx, yshift=\midtextshifty, \textcolor, rotate=\loadangle]{\midloadtext}
++(\loadangle:\lenamid) --
node[\loc, at end, xshift=\righttextshiftx, yshift=\righttextshifty, \textcolor]{\rightloadtext}
++(\totalanglerightnew:\totallengthrightnew)--
++(\loadnewangright:\loadarrowlenrightnew);

%% Angle Line

\ifthenelse{\drawangle=1 \and \absextraangle>10}
{
	\draw [line width=\anglinethk]
	(\loadxvalue{\drawanglei}, \loadyvalue{\drawanglei})
	++(\arrspang:\loadarrowspace) --
	++(\arrspang:\totanglen);
	
	\ifthenelse{\drawninetysign=1}{
		\draw [line width=\anglinethk]
		(\loadxvalue{\drawanglei}, \loadyvalue{\drawanglei})
		++(\arrspang:\loadarrowspace) -- ++(\loadangle:\ninetya) ++(180+\loadangle:\ninetyb)
		--	++(\arrspang:\ninetydim) -- ++ (180+\loadangle:\ninetydim);} {};
	
	\ifthenelse{\drawninetysign=2}{
		\draw [line width=\anglinethk]
		(\loadxvalue{\drawanglei}, \loadyvalue{\drawanglei})
		++(\arrspang:\loadarrowspace) -- ++(180+\loadangle:\ninetya) ++(\loadangle:\ninetyb)
		--	++(\arrspang:\ninetydim) -- ++ (\loadangle:\ninetydim);} {};
	
	\draw [line width=\anglinethk]
	(\loadxvalue{\drawanglei}, \loadyvalue{\drawanglei})
	++(\arrspang:\loadarrowspace) 
	++(\loadnewang:\loadarrowheight{\drawanglei}+\angsp) -- 
	++(\loadnewang:\anglen);
	
	
	\draw[loadarrowangle, line width=\anglinethk]
	(\arrspang:\angloc)
	++(\loadxvalue{\drawanglei}, \loadyvalue{\drawanglei})
	++(\arrspang:\loadarrowspace)
	arc (\arrspang:\loadnewang:\angloc)
	node[above, pos=0.5, yshift=\angtextshifty, xshift=\angtextshiftx]{\angtext};
}
{;};

\end{scope}
}